# Story 1.3: Terminal Integration (xterm.js + node-pty)

## Goal

Make the left pane a real working terminal. User can type commands, run `claude`, see full ANSI output with colors and formatting.

## Dependencies

- Story 1.2 (split pane layout)

## Files to Create/Edit

```
src/main/pty.ts                          # node-pty shell management
src/main/ipc.ts                          # IPC handlers (terminal data, resize)
src/main/index.ts                        # Update: register IPC handlers
src/renderer/components/terminal-pane.tsx # Update: xterm.js integration
src/renderer/hooks/use-terminal.ts       # Terminal state + IPC communication
src/shared/types.ts                      # Update: IPC message types
```

## Tech Details

**Main process (node-pty):**
- Spawn user's default shell (from `$SHELL` or fallback to `/bin/zsh`)
- Forward PTY data to renderer via IPC
- Handle resize events from renderer
- Handle input from renderer

**Renderer (xterm.js):**
- xterm.js terminal with `@xterm/addon-fit` for auto-sizing
- Dark theme matching the app
- Forward keystrokes to main process via IPC
- Auto-fit to container on resize

**IPC channels:**
- `terminal:data` (main → renderer): PTY output
- `terminal:input` (renderer → main): keyboard input
- `terminal:resize` (renderer → main): terminal dimensions

## Acceptance Criteria

- [ ] Terminal shows shell prompt on launch
- [ ] Can type commands: `ls`, `echo hello`, `git status`
- [ ] Full ANSI colors render correctly
- [ ] `claude --version` works
- [ ] Can run `claude` and interact with it (colors, progress bars, tool output)
- [ ] Terminal resizes when pane is resized
- [ ] Copy/paste works (Cmd+C/Cmd+V on macOS)
- [ ] Scroll works (mouse wheel, scroll bar)
- [ ] Terminal starts in the current working directory (or home)

## Notes

- This is THE core feature — take time to get it right
- xterm.js + node-pty is the same stack VS Code uses
- Don't add any output parsing yet (that's a later story)
- Shell should inherit user's environment ($PATH, etc.)
