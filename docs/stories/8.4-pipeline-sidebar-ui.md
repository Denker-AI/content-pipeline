# Story 8.4: Pipeline Sidebar UI

## Goal

Build the pipeline sidebar renderer components that replace the folder browser. Shows content organized by type with stage badges, "+" buttons for inline creation, and click-to-preview.

## Dependencies

- Story 8.3 (pipeline IPC)

## Files to Create

```
src/renderer/components/stage-badge.tsx       # Color-coded stage badge
src/renderer/components/pipeline-card.tsx     # Single content piece card
src/renderer/components/pipeline-section.tsx  # Collapsible section per content type
src/renderer/components/pipeline-sidebar.tsx  # Main sidebar component
src/renderer/hooks/use-pipeline.ts           # Pipeline state management hook
```

## Component Hierarchy

```
PipelineSidebar
  EmptyState (if no project)
  PipelineSection (linkedin)
    SectionHeader: icon + "LinkedIn" + count + "+" button
    PipelineCard (one per content piece)
      Title, StageBadge, Date
  PipelineSection (blog)
    ...
  PipelineSection (newsletter)
    ...
```

## Components

### StageBadge (`stage-badge.tsx`)
- Small pill/badge showing stage name
- Color map:
  - idea: `bg-zinc-600 text-zinc-200`
  - draft: `bg-yellow-600/20 text-yellow-400`
  - review: `bg-orange-600/20 text-orange-400`
  - final: `bg-blue-600/20 text-blue-400`
  - scheduled: `bg-purple-600/20 text-purple-400`
  - published: `bg-green-600/20 text-green-400`
- Clickable: opens dropdown to change stage
- Dropdown shows all stages, current one checked

### PipelineCard (`pipeline-card.tsx`)
- Props: `{ item: PipelineItem, isActive: boolean, onSelect, onStageChange }`
- Layout: title (truncated), stage badge, date (relative or formatted)
- Active state: blue left border + slightly lighter bg
- Hover: zinc-700/50 bg
- Click card â†’ onSelect (activates content piece)

### PipelineSection (`pipeline-section.tsx`)
- Props: `{ type, items, isExpanded, onToggle, onItemSelect, onCreateNew, activeItemId, onStageChange }`
- Header: chevron (rotate on expand) + type icon + type label + item count + "+" button
- Collapsible: items hidden when collapsed
- Type icons (text-based): LinkedIn="in", Blog="B", Newsletter="N"
- "+" button: calls onCreateNew(type)

### PipelineSidebar (`pipeline-sidebar.tsx`)
- Props: `{ onItemSelect, activeItemId }`
- Renders PipelineSection for each type that has items (or always show linkedin, blog, newsletter)
- Sections default expanded
- Empty state when no project: "Open Project" button
- Uses `usePipeline` hook

## Hook: `use-pipeline.ts`

```typescript
function usePipeline() {
  // State: items, activeItem, loading, expandedSections
  // On mount: load items via pipeline.listPipelineItems()
  // Subscribe to pipeline:contentChanged for live refresh
  // Methods: createContent, activateItem, updateStage, toggleSection
  // Computed: groupedItems (Record<ContentType, PipelineItem[]>)
}
```

## Acceptance Criteria

- [ ] PipelineSidebar shows sections for linkedin, blog, newsletter
- [ ] Each section shows content pieces with title, stage badge, date
- [ ] Sections collapsible with chevron
- [ ] "+" button creates new content inline
- [ ] Clicking a card activates the content piece
- [ ] Stage badge clickable with dropdown to change stage
- [ ] Active item highlighted with blue border
- [ ] Empty state with "Open Project" button
- [ ] Live refresh when pipeline changes
